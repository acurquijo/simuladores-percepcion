<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Escenario</title>

<style>
  body {
    background: #111; /* Fondo oscuro para resaltar el experimento */
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  .scene {
    width: 550px;
    height: 340px;
    background: #ffffff;
    border-radius: 8px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  }

  svg {
    width: 100%;
    height: 100%;
  }

  .stimulus {
    opacity: 0;
  }
</style>
</head>

<body>

<div class="scene">
  <svg viewBox="0 0 550 340">
    <circle cx="275" cy="170" r="50" fill="#dddddd" />

    <circle id="stim1" r="15" fill="#4a90e2" class="stimulus" />

    <circle id="stim2" r="15" fill="#e94e4e" class="stimulus" />
  </svg>
</div>

<script>
const stim1 = document.getElementById("stim1");
const stim2 = document.getElementById("stim2");

// Coordenadas del centro
const centerX = 275;
const centerY = 170;

// Configuración de tiempos (ms)
const approachTime = 800; // Duración del desplazamiento
const pauseBetween = 500; // Pausa entre el estímulo azul y el rojo
const cyclePause = 1000;  // Pausa antes de reiniciar el ciclo completo

/**
 * Función que anima un círculo hacia el centro
 * @param {Element} element - El círculo de SVG
 * @param {number} startX - Posición X inicial
 * @param {number} startY - Posición Y inicial
 */
async function animateStimulus(element, startX, startY) {
  // Posicionar al inicio y hacer visible
  element.setAttribute("cx", startX);
  element.setAttribute("cy", startY);
  
  const animation = element.animate([
    { opacity: 1, cx: startX, cy: startY },
    { opacity: 1, cx: centerX, cy: centerY, offset: 0.9 }, // Llega al centro
    { opacity: 0, cx: centerX, cy: centerY }              // Desaparece
  ], {
    duration: approachTime,
    easing: 'ease-in'
  });

  return animation.finished;
}

async function startSequence() {
  // 1. Estímulo Azul desde la izquierda
  await animateStimulus(stim1, 50, 170);

  // 2. Intervalo constante
  await new Promise(resolve => setTimeout(resolve, pauseBetween));

  // 3. Estímulo Rojo desde arriba
  await animateStimulus(stim2, 275, 40);

  // 4. Pausa antes de repetir el loop
  setTimeout(startSequence, cyclePause);
}

// Iniciar el loop
startSequence();
</script>

</body>
</html>
